--- aclocal.m4
+++ aclocal.m4
@@ -410,14 +410,6 @@ case "$CFLAGS" in
           * ) AC_COMPILER_OPTION(pipe, -pipe, -pipe, CFLAGS="$CFLAGS -pipe") ;;
 esac
 fi
-case "$CFLAGS" in
-    *-g* ) CFLAGS=`echo "$CFLAGS" |\
-                   sed -e 's/ -g / /g' -e 's/ -g$//' -e 's/^-g //g' -e 's/^-g$//'` ;;
-esac
-case "$CXXFLAGS" in
-    *-g* ) CXXFLAGS=`echo "$CXXFLAGS" |\
-                     sed -e 's/ -g / /g' -e 's/ -g$//' -e 's/^-g //g' -e 's/^-g$//'` ;;
-esac
 msg="disabled"
 ])dnl
 AC_MSG_CHECKING(for compilation debug mode)
--- pth_tcb.c
+++ pth_tcb.c
@@ -121,7 +121,9 @@ intern pth_t pth_tcb_alloc(unsigned int
                 return NULL;
             }
         }
-#if PTH_STACKGROWTH < 0
+#ifdef __ia64__
+        t->stackguard = (long *)(t->stack+(((stacksize/2/sizeof(long))-1)*sizeof(long)));
+#elif PTH_STACKGROWTH < 0
         /* guard is at lowest address (alignment is guarrantied) */
         t->stackguard = (long *)((long)t->stack); /* double cast to avoid alignment warning */
 #else
